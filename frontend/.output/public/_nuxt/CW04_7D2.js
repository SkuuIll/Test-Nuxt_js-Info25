import{_ as j}from"./9ykhWItT.js";import{d as V,r as h,E as _,e as F,J as G,x as N,c as f,S as O,f as v,h as t,z as c,t as m,l as g,g as k,m as R,o as i,i as I}from"./BE3ND16f.js";const M={class:"form-actions flex items-center justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700"},$=["disabled"],z=["disabled"],A=["disabled"],J=V({__name:"SimpleForm",props:{initialData:{default:()=>({})},submitText:{default:"Guardar"},loadingText:{default:"Guardando..."},cancelText:{default:"Cancelar"},draftText:{default:"Guardar Borrador"},showCancel:{type:Boolean,default:!0},showDraft:{type:Boolean,default:!1},isDraftable:{type:Boolean,default:!1},validationRules:{default:()=>({})}},emits:["submit","draft","cancel"],setup(T,{emit:D}){const d=T,u=D,a=h(!1),s=h(null),n=_({...d.initialData}),o=_({}),b=F(()=>Object.keys(o).length===0),w=(e,r)=>{n[e]=r,p(e)},p=e=>{const r=d.validationRules[e];if(r){const l=r(n[e]);l?o[e]=l:delete o[e]}},y=()=>{Object.keys(d.validationRules).forEach(e=>{p(e)})},x=e=>o[e]||null,B=e=>!!o[e],C=async()=>{if(y(),!!b.value)try{a.value=!0,s.value="submit",u("submit",{...n})}finally{a.value=!1,s.value=null}},S=async()=>{try{a.value=!0,s.value="draft",u("draft",{...n})}finally{a.value=!1,s.value=null}},E=()=>{u("cancel")};return G(()=>d.initialData,e=>{Object.assign(n,e)},{deep:!0}),N(()=>{y()}),(e,r)=>{const l=j;return i(),f("form",{onSubmit:R(C,["prevent"]),class:"simple-form space-y-6"},[O(e.$slots,"default",{form:t(n),loading:t(a),errors:t(o),setField:w,getError:x,hasError:B},void 0,!0),v("div",M,[e.showCancel?(i(),f("button",{key:0,type:"button",onClick:E,disabled:t(a),class:"btn btn-secondary"},m(e.cancelText),9,$)):c("",!0),e.showDraft&&e.isDraftable?(i(),f("button",{key:1,type:"button",onClick:S,disabled:t(a),class:"btn btn-outline"},[t(a)&&t(s)==="draft"?(i(),g(l,{key:0,name:"loading",class:"w-4 h-4 animate-spin mr-2"})):c("",!0),k(" "+m(e.draftText),1)],8,z)):c("",!0),v("button",{type:"submit",disabled:t(a)||!t(b),class:"btn btn-primary"},[t(a)&&t(s)==="submit"?(i(),g(l,{key:0,name:"loading",class:"w-4 h-4 animate-spin mr-2"})):c("",!0),k(" "+m(t(a)&&t(s)==="submit"?e.loadingText:e.submitText),1)],8,A)])],32)}}}),K=I(J,[["__scopeId","data-v-4a8b9d4e"]]);export{K as _};
