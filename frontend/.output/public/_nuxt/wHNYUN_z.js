import{c as r,o,f as e,d as M,e as w,W as V,a as u,h as s,l as x,z as f,X as C,Y as L,Z as J,$ as Q,t as _,r as j,a0 as W,w as k,F as T,k as N,L as B,a1 as E,_ as z,g as S,C as H,J as X,B as P,D as A,a2 as Y,i as q,O as K,a3 as ee,x as te,y as se,S as oe,Q as ae}from"./BE3ND16f.js";import{_ as re}from"./9ykhWItT.js";function ne(p,a){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})])}function ie(p,a){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})])}function Z(p,a){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"})])}function le(p,a){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})])}function I(p,a){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function de(p,a){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})])}function ce(p,a){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function O(p,a){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"})])}function R(p,a){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function ue(p,a){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])}function me(p,a){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})])}function F(p,a){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function G(p,a){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const he={class:"flex h-full w-64 flex-col bg-white shadow-lg"},pe={class:"flex h-16 items-center justify-between px-4 border-b"},ge={class:"flex-1 px-4 py-4 space-y-2"},_e={class:"border-t p-4"},fe={class:"flex items-center"},xe={class:"flex-shrink-0"},ve={class:"h-8 w-8 rounded-full bg-gray-300 flex items-center justify-center"},be={class:"text-sm font-medium text-gray-700"},ye={class:"ml-3"},we={class:"text-sm font-medium text-gray-700"},ke={class:"text-xs text-gray-500"},$e=M({__name:"Sidebar",props:{isOpen:{type:Boolean}},emits:["close"],setup(p){const{user:a,permissions:l}=useDashboardAuth(),{pendingCommentsCount:g}=useDashboardStats(),h=w(()=>{var t,i;return((t=l.value)==null?void 0:t.can_view_stats)||((i=a.value)==null?void 0:i.is_superuser)}),d=w(()=>{var t,i;return((t=l.value)==null?void 0:t.can_manage_posts)||((i=a.value)==null?void 0:i.is_superuser)}),m=w(()=>{var t,i;return((t=l.value)==null?void 0:t.can_manage_users)||((i=a.value)==null?void 0:i.is_superuser)}),c=w(()=>{var t,i;return((t=l.value)==null?void 0:t.can_manage_comments)||((i=a.value)==null?void 0:i.is_superuser)});return(t,i)=>{var b,$,y,D;const n=V("SidebarItem"),v=V("SidebarSection");return o(),r("div",he,[e("div",pe,[i[1]||(i[1]=e("div",{class:"flex items-center"},[e("h1",{class:"text-xl font-bold text-gray-900"},"Dashboard")],-1)),e("button",{onClick:i[0]||(i[0]=U=>t.$emit("close")),class:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500"},[u(s(G),{class:"h-6 w-6"})])]),e("nav",ge,[u(n,{to:"/dashboard",icon:s(L),label:"Inicio",active:(t._.provides[C]||t.$route).path==="/dashboard"},null,8,["icon","active"]),s(h)?(o(),x(n,{key:0,to:"/dashboard/stats",icon:s(le),label:"Estadísticas",active:(t._.provides[C]||t.$route).path.startsWith("/dashboard/stats")},null,8,["icon","active"])):f("",!0),s(d)?(o(),x(v,{key:1,title:"Contenido",icon:s(J),items:[{to:"/dashboard/posts",label:"Posts",active:(t._.provides[C]||t.$route).path.startsWith("/dashboard/posts")},{to:"/dashboard/categories",label:"Categorías",active:(t._.provides[C]||t.$route).path.startsWith("/dashboard/categories")}]},null,8,["icon","items"])):f("",!0),s(m)?(o(),x(n,{key:2,to:"/dashboard/users",icon:s(me),label:"Usuarios",active:(t._.provides[C]||t.$route).path.startsWith("/dashboard/users")},null,8,["icon","active"])):f("",!0),s(c)?(o(),x(n,{key:3,to:"/dashboard/comments",icon:s(Q),label:"Comentarios",active:(t._.provides[C]||t.$route).path.startsWith("/dashboard/comments"),badge:s(g)},null,8,["icon","active","badge"])):f("",!0),u(n,{to:"/dashboard/settings",icon:s(O),label:"Configuración",active:(t._.provides[C]||t.$route).path.startsWith("/dashboard/settings")},null,8,["icon","active"])]),e("div",_e,[e("div",fe,[e("div",xe,[e("div",ve,[e("span",be,_((((b=s(a))==null?void 0:b.username)||(($=s(a))==null?void 0:$.name)||"U").charAt(0).toUpperCase()),1)])]),e("div",ye,[e("p",we,_((y=s(a))==null?void 0:y.username),1),e("p",ke,_((D=s(a))==null?void 0:D.email),1)])])])])}}}),Ce={class:"relative"},Me={key:0,class:"absolute -top-1 -right-1 h-5 w-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center"},Se={key:0,class:"absolute right-0 mt-2 w-80 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-50"},je={class:"px-4 py-3 border-b border-gray-100"},De={class:"flex items-center justify-between"},Be={class:"max-h-96 overflow-y-auto"},Ae={key:0,class:"px-4 py-8 text-center"},Te={key:1,class:"py-1"},Ne=["onClick"],ze={class:"flex items-start space-x-3"},Pe={class:"flex-1 min-w-0"},Ue={class:"text-sm font-medium text-gray-900"},Ve={key:0,class:"text-sm text-gray-500 mt-1"},Ze={class:"text-xs text-gray-400 mt-1"},Le={key:0,class:"flex-shrink-0 w-2 h-2 bg-blue-600 rounded-full"},We={class:"px-4 py-3 border-t border-gray-100"},Ee=M({__name:"Notifications",setup(p){const a=j(!1),l=j([{id:"1",type:"info",title:"Nuevo comentario",message:'Tienes un nuevo comentario en "Mi primer post"',timestamp:Date.now()-3e5,read:!1},{id:"2",type:"success",title:"Post publicado",message:'Tu post "Tutorial de Vue.js" ha sido publicado exitosamente',timestamp:Date.now()-36e5,read:!1},{id:"3",type:"warning",title:"Comentario pendiente",message:"Hay 3 comentarios esperando moderación",timestamp:Date.now()-72e5,read:!0}]),g=w(()=>l.value.filter(c=>!c.read).length),h=c=>{const t=l.value.find(i=>i.id===c);t&&(t.read=!0)},d=()=>{l.value.forEach(c=>{c.read=!0})},m=c=>{const i=Date.now()-c,n=Math.floor(i/6e4),v=Math.floor(i/36e5),b=Math.floor(i/864e5);return n<1?"Ahora":n<60?`${n}m`:v<24?`${v}h`:`${b}d`};return(c,t)=>{const i=z;return o(),r("div",Ce,[e("button",{onClick:t[0]||(t[0]=n=>a.value=!s(a)),class:"relative p-2 text-gray-400 hover:text-gray-500 rounded-lg hover:bg-gray-100 transition-colors"},[u(s(Z),{class:"h-6 w-6"}),s(g)>0?(o(),r("span",Me,_(s(g)>9?"9+":s(g)),1)):f("",!0)]),u(W,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:k(()=>[s(a)?(o(),r("div",Se,[e("div",je,[e("div",De,[t[3]||(t[3]=e("h3",{class:"text-sm font-medium text-gray-900"}," Notificaciones ",-1)),s(g)>0?(o(),r("button",{key:0,onClick:d,class:"text-xs text-blue-600 hover:text-blue-500"}," Marcar todas como leídas ")):f("",!0)])]),e("div",Be,[s(l).length===0?(o(),r("div",Ae,[u(s(Z),{class:"mx-auto h-12 w-12 text-gray-300"}),t[4]||(t[4]=e("p",{class:"mt-2 text-sm text-gray-500"}," No tienes notificaciones ",-1))])):(o(),r("div",Te,[(o(!0),r(T,null,N(s(l),n=>(o(),r("div",{key:n.id,class:B(["px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-50 last:border-b-0",{"bg-blue-50":!n.read}]),onClick:v=>h(n.id)},[e("div",ze,[e("div",{class:B(["flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center",{"bg-blue-100":n.type==="info","bg-green-100":n.type==="success","bg-yellow-100":n.type==="warning","bg-red-100":n.type==="error"}])},[n.type==="info"?(o(),x(s(E),{key:0,class:"h-4 w-4 text-blue-600"})):n.type==="success"?(o(),x(s(I),{key:1,class:"h-4 w-4 text-green-600"})):n.type==="warning"?(o(),x(s(R),{key:2,class:"h-4 w-4 text-yellow-600"})):(o(),x(s(F),{key:3,class:"h-4 w-4 text-red-600"}))],2),e("div",Pe,[e("p",Ue,_(n.title),1),n.message?(o(),r("p",Ve,_(n.message),1)):f("",!0),e("p",Ze,_(m(n.timestamp)),1)]),n.read?f("",!0):(o(),r("div",Le))])],10,Ne))),128))]))]),e("div",We,[u(i,{to:"/dashboard/notifications",class:"text-sm text-blue-600 hover:text-blue-500",onClick:t[1]||(t[1]=n=>a.value=!1)},{default:k(()=>t[5]||(t[5]=[S(" Ver todas las notificaciones ",-1)])),_:1,__:[5]})])])):f("",!0)]),_:1}),s(a)?(o(),r("div",{key:0,class:"fixed inset-0 z-40",onClick:t[2]||(t[2]=n=>a.value=!1)})):f("",!0)])}}}),He={class:"relative"},Ie={class:"h-8 w-8 bg-blue-600 rounded-full flex items-center justify-center"},Oe={class:"text-sm font-medium text-white"},Re={class:"hidden md:block text-left"},Fe={class:"text-sm font-medium text-gray-900"},Ge={class:"text-xs text-gray-500"},Je={key:0,class:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-50"},Qe={class:"py-1"},Xe={class:"px-4 py-3 border-b border-gray-100"},Ye={class:"text-sm font-medium text-gray-900"},qe={class:"text-sm text-gray-500"},Ke={class:"mt-1 flex items-center space-x-2"},et={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800"},tt={key:1,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800"},st={class:"py-1"},ot={class:"py-1 border-t border-gray-100"},at=M({__name:"UserMenu",setup(p){const a=j(!1),{user:l,logout:g}=useDashboardAuth(),{success:h}=H(),d=w(()=>{if(!l.value)return"?";const c=l.value.first_name||l.value.username,t=l.value.last_name||"";return(c.charAt(0)+t.charAt(0)).toUpperCase()}),m=async()=>{a.value=!1;try{await g(!1),h("Sesión cerrada","Has cerrado sesión exitosamente"),await A("/dashboard/login")}catch(c){console.error("Logout error:",c),await A("/dashboard/login")}};return X(()=>P().path,()=>{a.value=!1}),(c,t)=>{var n,v;const i=z;return o(),r("div",He,[e("button",{onClick:t[0]||(t[0]=b=>a.value=!s(a)),class:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 transition-colors"},[e("div",Ie,[e("span",Oe,_(s(d)),1)]),e("div",Re,[e("p",Fe,_((n=s(l))==null?void 0:n.username),1),e("p",Ge,_((v=s(l))==null?void 0:v.email),1)]),u(s(de),{class:B(["h-4 w-4 text-gray-400 transition-transform",{"rotate-180":s(a)}])},null,8,["class"])]),u(W,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:k(()=>{var b,$,y,D;return[s(a)?(o(),r("div",Je,[e("div",Qe,[e("div",Xe,[e("p",Ye,_(((b=s(l))==null?void 0:b.first_name)||(($=s(l))==null?void 0:$.username)),1),e("p",qe,_((y=s(l))==null?void 0:y.email),1),e("div",Ke,[(D=s(l))!=null&&D.is_superuser?(o(),r("span",et," Superusuario ")):(o(),r("span",tt," Administrador "))])]),e("div",st,[u(i,{to:"/dashboard/profile",class:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:t[1]||(t[1]=U=>a.value=!1)},{default:k(()=>[u(s(ue),{class:"mr-3 h-4 w-4"}),t[4]||(t[4]=S(" Mi Perfil ",-1))]),_:1,__:[4]}),u(i,{to:"/dashboard/settings",class:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:t[2]||(t[2]=U=>a.value=!1)},{default:k(()=>[u(s(O),{class:"mr-3 h-4 w-4"}),t[5]||(t[5]=S(" Configuración ",-1))]),_:1,__:[5]})]),e("div",ot,[e("button",{onClick:m,class:"flex items-center w-full px-4 py-2 text-sm text-red-700 hover:bg-red-50"},[u(s(ne),{class:"mr-3 h-4 w-4"}),t[6]||(t[6]=S(" Cerrar Sesión ",-1))])])])])):f("",!0)]}),_:1}),s(a)?(o(),r("div",{key:0,class:"fixed inset-0 z-40",onClick:t[3]||(t[3]=b=>a.value=!1)})):f("",!0)])}}}),rt={class:"bg-white shadow-sm border-b"},nt={class:"flex h-16 items-center justify-between px-4"},it={class:"flex items-center"},lt={class:"ml-4 text-xl font-semibold text-gray-900 lg:ml-0"},dt={class:"flex items-center space-x-4"},ct=M({__name:"Header",emits:["toggleSidebar"],setup(p){const a=P(),l=w(()=>{const g={"/dashboard":"Dashboard","/dashboard/stats":"Estadísticas","/dashboard/posts":"Posts","/dashboard/posts/create":"Crear Post","/dashboard/categories":"Categorías","/dashboard/users":"Usuarios","/dashboard/comments":"Comentarios","/dashboard/settings":"Configuración"};return a.path.includes("/dashboard/posts/")&&a.path.includes("/edit")?"Editar Post":a.path.includes("/dashboard/users/")&&!a.path.endsWith("/users")?"Perfil de Usuario":g[a.path]||"Dashboard"});return(g,h)=>{const d=Ee,m=at;return o(),r("header",rt,[e("div",nt,[e("div",it,[e("button",{onClick:h[0]||(h[0]=c=>g.$emit("toggleSidebar")),class:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500"},[u(s(ie),{class:"h-6 w-6"})]),e("h1",lt,_(s(l)),1)]),e("div",dt,[u(d),u(m)])])])}}}),ut={class:"flex","aria-label":"Breadcrumb"},mt={class:"flex items-center space-x-2"},ht={class:"flex items-center"},pt={key:1,class:"ml-2 text-sm font-medium text-gray-900"},gt=M({__name:"Breadcrumb",setup(p){const a=P(),l=w(()=>{const g=a.path.split("/").filter(Boolean),h=[],d=g.slice(1);let m="/dashboard";for(let c=0;c<d.length;c++){const t=d[c];if(m+=`/${t}`,/^\d+$/.test(t))continue;let i=t;i={posts:"Posts",create:"Crear",edit:"Editar",categories:"Categorías",users:"Usuarios",comments:"Comentarios",stats:"Estadísticas",settings:"Configuración",profile:"Perfil",notifications:"Notificaciones"}[t]||t.charAt(0).toUpperCase()+t.slice(1),h.push({name:i,path:m})}return h});return(g,h)=>{const d=z;return o(),r("nav",ut,[e("ol",mt,[e("li",null,[u(d,{to:"/dashboard",class:"text-gray-400 hover:text-gray-500"},{default:k(()=>[u(s(L),{class:"h-4 w-4"}),h[0]||(h[0]=e("span",{class:"sr-only"},"Dashboard",-1))]),_:1,__:[0]})]),(o(!0),r(T,null,N(l.value,(m,c)=>(o(),r("li",{key:m.path},[e("div",ht,[u(s(ce),{class:"h-4 w-4 text-gray-300"}),c<l.value.length-1?(o(),x(d,{key:0,to:m.path,class:"ml-2 text-sm font-medium text-gray-500 hover:text-gray-700"},{default:k(()=>[S(_(m.name),1)]),_:2},1032,["to"])):(o(),r("span",pt,_(m.name),1))])]))),128))])])}}}),_t={class:"fixed top-4 right-4 z-50 space-y-2"},ft={class:"p-4"},xt={class:"flex items-start"},vt={class:"flex-shrink-0"},bt={class:"ml-3 w-0 flex-1 pt-0.5"},yt={class:"text-sm font-medium text-gray-900"},wt={key:0,class:"mt-1 text-sm text-gray-500"},kt={class:"ml-4 flex-shrink-0 flex"},$t=["onClick"],Ct=M({__name:"Toast",setup(p){const{toasts:a,removeToast:l}=H();return(g,h)=>(o(),r("div",_t,[u(Y,{name:"toast",tag:"div",class:"space-y-2"},{default:k(()=>[(o(!0),r(T,null,N(s(a),d=>(o(),r("div",{key:d.id,class:B(["max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden",{"border-l-4 border-green-400":d.type==="success","border-l-4 border-red-400":d.type==="error","border-l-4 border-yellow-400":d.type==="warning","border-l-4 border-blue-400":d.type==="info"}])},[e("div",ft,[e("div",xt,[e("div",vt,[d.type==="success"?(o(),x(s(I),{key:0,class:"h-6 w-6 text-green-400"})):d.type==="error"?(o(),x(s(F),{key:1,class:"h-6 w-6 text-red-400"})):d.type==="warning"?(o(),x(s(R),{key:2,class:"h-6 w-6 text-yellow-400"})):(o(),x(s(E),{key:3,class:"h-6 w-6 text-blue-400"}))]),e("div",bt,[e("p",yt,_(d.title),1),d.message?(o(),r("p",wt,_(d.message),1)):f("",!0)]),e("div",kt,[e("button",{type:"button",class:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:m=>s(l)(d.id)},[h[0]||(h[0]=e("span",{class:"sr-only"},"Cerrar",-1)),u(s(G),{class:"h-5 w-5"})],8,$t)])])])],2))),128))]),_:1})]))}}),Mt=q(Ct,[["__scopeId","data-v-a3e87519"]]),St={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},jt={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Dt={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-sm sm:w-full sm:p-6"},Bt={class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 dark:bg-yellow-900"},At={class:"mt-3 text-center sm:mt-5"},Tt={class:"mt-2"},Nt={class:"text-sm text-gray-500 dark:text-gray-400"},zt={class:"mt-4"},Pt={class:"bg-gray-200 dark:bg-gray-700 rounded-full h-2"},Ut={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},Vt=["disabled"],Zt={__name:"SessionWarning",setup(p){const{showWarning:a,timeLeft:l,extendSession:g,formatTime:h}=useDashboardSession(),{logout:d}=useDashboardAuth(),m=j(!1),c=async()=>{try{m.value=!0,await g()}catch(i){console.error("Failed to extend session:",i)}finally{m.value=!1}},t=async()=>{await d(),await A("/dashboard/login?reason=manual")};return(i,n)=>{const v=re;return o(),x(ee,{to:"body"},[s(a)?(o(),r("div",St,[e("div",jt,[n[1]||(n[1]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),e("div",Dt,[e("div",null,[e("div",Bt,[u(v,{name:"exclamation-triangle",class:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})]),e("div",At,[n[0]||(n[0]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 dark:text-white",id:"modal-title"}," Sesión por expirar ",-1)),e("div",Tt,[e("p",Nt," Tu sesión expirará en "+_(s(h)(s(l)))+". ¿Deseas extender tu sesión? ",1)]),e("div",zt,[e("div",Pt,[e("div",{class:"bg-yellow-500 h-2 rounded-full transition-all duration-1000",style:K({width:`${s(l)/300*100}%`})},null,4)])])])]),e("div",Ut,[e("button",{type:"button",onClick:c,disabled:s(m),class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:col-start-2 sm:text-sm disabled:opacity-50"},[s(m)?(o(),x(v,{key:0,name:"loading",class:"w-4 h-4 animate-spin mr-2"})):f("",!0),S(" "+_(s(m)?"Extendiendo...":"Extender sesión"),1)],8,Vt),e("button",{type:"button",onClick:t,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-700 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:col-start-1 sm:text-sm"}," Cerrar sesión ")])])])])):f("",!0)])}}},Lt={class:"min-h-screen bg-gray-50"},Wt={key:0,class:"min-h-screen flex items-center justify-center"},Et={key:1},Ht={class:"lg:pl-64"},It={class:"p-4"},Ft=M({__name:"dashboard",setup(p){const a=j(!1),{isAuthenticated:l,initialized:g}=useDashboardAuth(),{initializeSession:h}=useDashboardSession(),d=j(!1);let m=null;return te(()=>{const c=()=>{g.value?l.value?(d.value=!0,m=h()):A("/dashboard/login"):ae(c)};c()}),se(()=>{m&&m()}),(c,t)=>{const i=$e,n=ct,v=gt,b=Mt,$=Zt;return o(),r("div",Lt,[d.value?(o(),r("div",Et,[u(i,{"is-open":a.value,onClose:t[0]||(t[0]=y=>a.value=!1),class:"fixed inset-y-0 left-0 z-50 lg:static lg:inset-0"},null,8,["is-open"]),e("div",Ht,[u(n,{onToggleSidebar:t[1]||(t[1]=y=>a.value=!a.value),class:"sticky top-0 z-40"}),u(v,{class:"px-4 py-2 bg-white border-b"}),e("main",It,[oe(c.$slots,"default")])]),a.value?(o(),r("div",{key:0,class:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:t[2]||(t[2]=y=>a.value=!1)})):f("",!0)])):(o(),r("div",Wt,t[3]||(t[3]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))),u(b),u($)])}}});export{Ft as default};
