import{d as S,B as D,j as T,C as q,r as g,u as V,e as _,x as F,J,N as O,c as l,f as t,z as w,g as C,t as m,h as a,F as z,k as H,a as I,w as j,_ as G,o as r,l as K,i as Q}from"./BE3ND16f.js";import{_ as U}from"./DX5PA3XH.js";import"./D0J4bnbB.js";import"./D_M7RfL4.js";import"./9ykhWItT.js";const W={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},X={class:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700"},Y={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Z={class:"text-center"},R={class:"text-4xl font-bold text-gray-900 dark:text-white mb-4 capitalize"},tt={class:"text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto"},et={key:0,class:"mt-4 text-sm text-gray-500 dark:text-gray-400"},at={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},ot={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},st={key:1,class:"text-center py-12"},rt={class:"max-w-md mx-auto"},nt={class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},lt={class:"text-gray-600 dark:text-gray-400 mb-4"},it={class:"space-x-4"},ct={key:2,class:"text-center py-12"},dt={class:"max-w-md mx-auto"},ut={class:"text-gray-600 dark:text-gray-400 mb-4"},gt={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},mt={key:4,class:"text-center mt-12"},pt=["disabled"],xt={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5",fill:"none",viewBox:"0 0 24 24"},yt=S({__name:"[slug]",setup(vt){const E=D(),{$api:B}=T(),{error:L}=q(),h=E.params.slug,i=h.replace(/-/g," "),n=g(null),d=g([]),N=g(!0),p=g(null),$=g(!1),x=g(!1),b=g(1),k=g(0);V({title:_(()=>{var o;return`${((o=n.value)==null?void 0:o.nombre)||i} - Blog de Noticias`}),meta:[{name:"description",content:_(()=>{var o;return((o=n.value)==null?void 0:o.descripcion)||`Explora todos los artículos de la categoría ${i} en nuestro blog de noticias.`})},{name:"robots",content:"index, follow"},{property:"og:title",content:_(()=>{var o;return`${((o=n.value)==null?void 0:o.nombre)||i} - Blog de Noticias`})},{property:"og:description",content:_(()=>{var o;return((o=n.value)==null?void 0:o.descripcion)||`Explora todos los artículos de la categoría ${i}`})},{property:"og:type",content:"website"}]}),V({script:[{type:"application/ld+json",innerHTML:_(()=>{var o,e;return JSON.stringify({"@context":"https://schema.org","@type":"CollectionPage",name:((o=n.value)==null?void 0:o.nombre)||i,description:((e=n.value)==null?void 0:e.descripcion)||`Artículos de la categoría ${i}`,url:`${window.location.origin}/category/${h}`,inLanguage:"es-ES",mainEntity:{"@type":"ItemList",numberOfItems:k.value,itemListElement:d.value.map((u,s)=>({"@type":"ListItem",position:s+1,item:{"@type":"Article",name:u.titulo,url:`${window.location.origin}/posts/${u.slug}`}}))}})})}]});const f=async(o=1,e=!1)=>{var u;try{e?x.value=!0:(N.value=!0,p.value=null);const[s,c]=await Promise.all([B.get(`/categories/${h}/`).catch(()=>null),B.get("/posts/",{params:{category:h,page:o,page_size:12,ordering:"-fecha_publicacion"}})]);if(s!=null&&s.data&&(n.value=s.data),c!=null&&c.data){const y=c.data.results||[];e?d.value.push(...y):d.value=y,k.value=c.data.count||0,$.value=!!c.data.next}}catch(s){p.value=s,console.error("Error fetching category data:",s),((u=s.response)==null?void 0:u.status)===404?L("Categoría no encontrada","La categoría que buscas no existe."):L("Error al cargar contenido","No se pudieron cargar los artículos de esta categoría.")}finally{N.value=!1,x.value=!1}},A=async()=>{x.value||!$.value||(b.value++,await f(b.value,!0))},P=async()=>{b.value=1,await f()};return F(()=>{f()}),J(()=>E.params.slug,()=>{b.value=1,f()}),O(o=>(console.error("Category page error:",o),p.value=o,!1)),(o,e)=>{var c,y,M;const u=G,s=U;return r(),l("div",W,[t("div",X,[t("div",Y,[t("div",Z,[e[1]||(e[1]=t("div",{class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-200 mb-4"},[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})]),C(" Categoría ")],-1)),t("h1",R,m(((c=a(n))==null?void 0:c.nombre)||a(i)),1),t("p",tt,m(((y=a(n))==null?void 0:y.descripcion)||`Explora todos los artículos de la categoría ${a(i)}`),1),a(n)?(r(),l("div",et,m(a(k))+" "+m(a(k)===1?"artículo":"artículos")+" en esta categoría ",1)):w("",!0)])])]),t("div",at,[a(N)?(r(),l("div",ot,[(r(),l(z,null,H(6,v=>t("div",{key:v,class:"animate-pulse"},e[2]||(e[2]=[t("div",{class:"bg-gray-200 dark:bg-gray-700 rounded-lg h-48 mb-4"},null,-1),t("div",{class:"space-y-2"},[t("div",{class:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),t("div",{class:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})],-1)]))),64))])):a(p)?(r(),l("div",st,[t("div",rt,[e[4]||(e[4]=t("svg",{class:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),t("h3",nt,m(a(p).statusCode===404?"Categoría no encontrada":"Error al cargar el contenido"),1),t("p",lt,m(a(p).statusCode===404?"La categoría que buscas no existe o ha sido eliminada.":"No pudimos cargar los artículos para esta categoría."),1),t("div",it,[a(p).statusCode!==404?(r(),l("button",{key:0,onClick:e[0]||(e[0]=v=>P()),class:"btn btn-primary"}," Intentar de nuevo ")):w("",!0),I(u,{to:"/",class:"btn btn-secondary"},{default:j(()=>e[3]||(e[3]=[C(" Ir al inicio ",-1)])),_:1,__:[3]})])])])):!a(d)||a(d).length===0?(r(),l("div",ct,[t("div",dt,[e[6]||(e[6]=t("svg",{class:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e[7]||(e[7]=t("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," No hay artículos disponibles ",-1)),t("p",ut,' Aún no hay artículos publicados en la categoría "'+m(((M=a(n))==null?void 0:M.nombre)||a(i))+'". ',1),I(u,{to:"/",class:"btn btn-primary"},{default:j(()=>e[5]||(e[5]=[C(" Explorar otros artículos ",-1)])),_:1,__:[5]})])])):(r(),l("div",gt,[(r(!0),l(z,null,H(a(d),v=>(r(),K(s,{key:v.id,post:v,class:"hover:shadow-lg transition-all duration-300"},null,8,["post"]))),128))])),a(d)&&a(d).length>0&&a($)?(r(),l("div",mt,[t("button",{onClick:A,disabled:a(x),class:"btn btn-secondary"},[a(x)?(r(),l("svg",xt,e[8]||(e[8]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):w("",!0),C(" "+m(a(x)?"Cargando...":"Cargar más artículos"),1)],8,pt)])):w("",!0)])])}}}),wt=Q(yt,[["__scopeId","data-v-12477967"]]);export{wt as default};
