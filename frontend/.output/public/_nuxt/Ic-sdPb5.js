import{_ as G}from"./9ykhWItT.js";import{d as P,C as vt,r as S,a4 as xt,x as U,y as J,j as Z,D as Q,c,o as a,f as t,a as r,z as b,L as V,h as e,t as D,a0 as L,w as l,m as _t,g as _,F,k as q,l as A,_ as tt,i as H,a5 as bt,s as yt,e as R,J as ht,B as wt,X as kt,n as $t,v as Ct,p as Tt,q as It,W as Y,a6 as Nt,O as At,a7 as St,a3 as Dt,T as Mt,a8 as zt,S as Bt}from"./BE3ND16f.js";import{_ as Et}from"./CexkVQ5q.js";import{_ as jt}from"./CW1EBp9F.js";import{a as Lt,u as Pt}from"./DTjiTvom.js";import{u as et}from"./DJaA1xmL.js";import{o as gt}from"./CxMQz_G8.js";import{_ as Rt}from"./D_M7RfL4.js";import"./CiJxZ_V9.js";import"./CRYnRe3J.js";const Vt={class:"relative"},Ut={key:0,class:"absolute -top-1 -right-1 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-500 rounded-full min-w-[1.25rem] h-5"},Ft={key:1,class:"absolute -bottom-1 -right-1 w-3 h-3 bg-yellow-400 border-2 border-white dark:border-gray-800 rounded-full",title:"Reconnecting..."},qt={class:"px-4 py-3 border-b border-gray-200 dark:border-gray-700"},Ht={class:"flex items-center justify-between"},Ot={class:"flex items-center space-x-2"},Wt=["disabled"],Xt={key:0,class:"mt-2"},Yt={class:"max-h-96 overflow-y-auto"},Gt={key:0,class:"p-4"},Jt={class:"animate-pulse space-y-3"},Kt={key:1,class:"p-8 text-center"},Qt={key:2,class:"divide-y divide-gray-200 dark:divide-gray-700"},Zt={class:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-750 rounded-b-lg"},te={class:"flex items-center justify-between"},ee={class:"text-sm text-gray-500 dark:text-gray-400"},se=P({__name:"NotificationCenter",props:{maxVisible:{default:5}},setup(B){const i=B,n=Lt(),{showToast:x}=vt(),f=S(!1),{notifications:d,unreadCount:h,totalCount:$,loading:T,isConnected:N,connectionStatus:o,recentNotifications:p}=xt(n),u=async()=>{if(f.value=!f.value,f.value)try{await n.fetchNotifications({page:1,page_size:i.maxVisible})}catch(w){console.error("Error fetching notifications:",w)}},k=()=>{f.value=!1},M=async()=>{try{if(await n.markAllAsRead())x({title:"Éxito",message:"Todas las notificaciones han sido marcadas como leídas",type:"success"});else throw new Error("Failed to mark all as read")}catch{x({title:"Error",message:"No se pudieron marcar las notificaciones como leídas",type:"error"})}},y=async w=>{try{await n.markAsRead(w)}catch(g){console.error("Error marking notification as read:",g)}},O=async w=>{try{await n.dismissNotification(w)&&x({title:"Notificación eliminada",message:"La notificación ha sido eliminada",type:"info"})}catch{x({title:"Error",message:"No se pudo eliminar la notificación",type:"error"})}},j=async w=>{w.is_read||await y(w.id),w.action_url&&(k(),await Q(w.action_url))},s=()=>{k(),Q("/notifications/settings")},I=w=>{w.target.closest(".relative")||k()};U(()=>{document.addEventListener("click",I)}),J(()=>{document.removeEventListener("click",I)});const v=Z();return U(()=>{var w,g;(w=v.$bus)==null||w.on("new-notification",m=>{f.value||x({title:m.title,message:m.message,type:m.priority==="urgent"?"error":"info",duration:m.priority==="urgent"?0:5e3,action:m.action_url?{label:"Ver",handler:()=>Q(m.action_url)}:void 0})}),(g=v.$bus)==null||g.on("system-announcement",m=>{x({title:"📢 "+m.title,message:m.message,type:"warning",duration:1e4,persistent:m.priority==="urgent"})})}),(w,g)=>{const m=jt,E=tt;return a(),c("div",Vt,[t("button",{onClick:u,class:V(["relative p-2 text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 rounded-lg transition-colors",{"text-primary-600 dark:text-primary-400":e(f)}]),"aria-label":"Notifications"},[g[1]||(g[1]=t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)),e(h)>0?(a(),c("span",Ut,D(e(h)>99?"99+":e(h)),1)):b("",!0),e(N)?b("",!0):(a(),c("span",Ft))],2),r(L,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:l(()=>[e(f)?(a(),c("div",{key:0,class:"absolute right-0 mt-2 w-96 bg-white dark:bg-gray-800 rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 z-50",onClick:g[0]||(g[0]=_t(()=>{},["stop"]))},[t("div",qt,[t("div",Ht,[g[3]||(g[3]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Notificaciones ",-1)),t("div",Ot,[e(h)>0?(a(),c("button",{key:0,onClick:M,disabled:e(T),class:"text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 disabled:opacity-50 disabled:cursor-not-allowed"}," Marcar todas como leídas ",8,Wt)):b("",!0),t("button",{onClick:s,class:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded",title:"Configuración de notificaciones"},g[2]||(g[2]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))])]),e(o)!=="connected"?(a(),c("div",Xt,g[4]||(g[4]=[t("div",{class:"flex items-center text-sm text-yellow-600 dark:text-yellow-400"},[t("svg",{class:"w-4 h-4 mr-1 animate-spin",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),_(" Reconectando... ")],-1)]))):b("",!0)]),t("div",Yt,[e(T)&&e(d).length===0?(a(),c("div",Gt,[t("div",Jt,[(a(),c(F,null,q(3,z=>t("div",{key:z,class:"flex space-x-3"},g[5]||(g[5]=[t("div",{class:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full"},null,-1),t("div",{class:"flex-1 space-y-2"},[t("div",{class:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),t("div",{class:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})],-1)]))),64))])])):e(d).length===0?(a(),c("div",Kt,g[6]||(g[6]=[t("svg",{class:"w-12 h-12 mx-auto text-gray-400 dark:text-gray-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1),t("p",{class:"text-gray-500 dark:text-gray-400"},"No tienes notificaciones",-1)]))):(a(),c("div",Qt,[(a(!0),c(F,null,q(e(p),z=>(a(),A(m,{key:z.id,notification:z,onRead:y,onDismiss:O,onClick:j},null,8,["notification"]))),128))]))]),t("div",Zt,[t("div",te,[t("span",ee,D(e($)>0?`${Math.min(e(p).length,5)} de ${e($)}`:"Sin notificaciones"),1),r(E,{to:"/notifications",onClick:k,class:"text-sm font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300"},{default:l(()=>g[7]||(g[7]=[_(" Ver todas ",-1)])),_:1,__:[7]})])])])):b("",!0)]),_:1}),e(f)?(a(),c("div",{key:0,class:"fixed inset-0 z-40",onClick:k})):b("",!0)])}}}),oe=H(se,[["__scopeId","data-v-dc551353"]]),re=["title"],ae=P({__name:"ThemeToggle",setup(B){const{isDark:i,toggleTheme:n}=bt();return(x,f)=>{const d=G;return a(),c("button",{class:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200",title:e(i)?"Cambiar a modo claro":"Cambiar a modo oscuro",onClick:f[0]||(f[0]=(...h)=>e(n)&&e(n)(...h))},[r(L,{name:"theme-icon",mode:"out-in"},{default:l(()=>[e(i)?(a(),A(d,{key:"sun",name:"sun",class:"w-5 h-5 text-yellow-500"})):(a(),A(d,{key:"moon",name:"moon",class:"w-5 h-5 text-gray-600 dark:text-gray-400"}))]),_:1})],8,re)}}}),ne=H(ae,[["__scopeId","data-v-3d029fb9"]]),ie={class:"fixed top-0 left-0 right-0 z-50 navbar-blur"},le={class:"container mx-auto px-4 py-3"},de={class:"flex items-center justify-between"},ce={class:"hidden md:flex items-center space-x-6"},ue={key:0,class:"absolute top-full left-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-2"},me={class:"text-xs text-gray-500 ml-2"},pe={class:"hidden md:block flex-1 max-w-md mx-8"},fe={class:"flex items-center space-x-4"},ge={key:2,class:"hidden md:flex items-center space-x-2"},_e={class:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center text-white text-sm font-medium"},ye={key:0,class:"absolute top-full right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-2"},ve={class:"px-4 py-2 border-b border-gray-200 dark:border-gray-700"},xe={class:"text-sm font-medium text-gray-900 dark:text-white"},be={class:"text-xs text-gray-500"},he={key:0,class:"border-t border-gray-200 dark:border-gray-700 my-2"},we={key:1,class:"px-3 py-2"},ke={key:0,class:"md:hidden mt-4 pb-4 border-t border-gray-200 dark:border-gray-700"},$e={class:"py-4"},Ce={class:"space-y-2"},Te={class:"space-y-1"},Ie={key:0,class:"pl-4 space-y-1"},Ne={key:0,class:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 space-y-2"},Ae=P({__name:"AppHeader",setup(B){const{user:i,isAuthenticated:n,logout:x}=yt(),f=et(),d=S(!1),h=S(!1),$=S(!1),T=S(!1),N=S(),o=S(),p=R(()=>f.categories);U(async()=>{try{await f.fetchCategories()}catch(j){console.error("Error loading categories in header:",j)}});const u=()=>{d.value=!d.value},k=()=>{h.value=!h.value},M=()=>{$.value=!$.value},y=()=>{T.value=!T.value},O=async()=>{await x(),$.value=!1};return gt(N,()=>{h.value=!1}),gt(o,()=>{$.value=!1}),ht(()=>wt().path,()=>{d.value=!1}),(j,s)=>{var E,z,K,W;const I=G,v=tt,w=Et,g=oe,m=ne;return a(),c("header",ie,[t("nav",le,[t("div",de,[r(v,{to:"/",class:"flex items-center space-x-2 text-xl font-bold text-gray-900 dark:text-white"},{default:l(()=>[r(I,{name:"newspaper",class:"w-8 h-8 text-primary-600"}),s[7]||(s[7]=t("span",null,"Blog de Noticias",-1))]),_:1,__:[7]}),t("div",ce,[r(v,{to:"/",class:V(["nav-link",{active:(j._.provides[kt]||j.$route).path==="/"}])},{default:l(()=>s[8]||(s[8]=[_(" Inicio ",-1)])),_:1,__:[8]},8,["class"]),t("div",{ref_key:"categoriesDropdown",ref:N,class:"relative"},[t("button",{class:"nav-link flex items-center space-x-1",onClick:k},[s[9]||(s[9]=t("span",null,"Categorías",-1)),r(I,{name:"chevron-down",class:"w-4 h-4"})]),r(L,{name:"dropdown"},{default:l(()=>[e(h)?(a(),c("div",ue,[(a(!0),c(F,null,q(e(p),C=>(a(),A(v,{key:C.id,to:`/posts?category=${C.slug}`,class:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:s[0]||(s[0]=X=>h.value=!1)},{default:l(()=>[_(D(C.name)+" ",1),t("span",me,"("+D(C.posts_count)+")",1)]),_:2},1032,["to"]))),128))])):b("",!0)]),_:1})],512),r(v,{to:"/posts",class:"nav-link"},{default:l(()=>s[10]||(s[10]=[_(" Posts ",-1)])),_:1,__:[10]}),r(v,{to:"/search",class:"nav-link"},{default:l(()=>s[11]||(s[11]=[_(" Buscar ",-1)])),_:1,__:[11]})]),t("div",pe,[r(w)]),t("div",fe,[e(n)&&((E=e(i))!=null&&E.is_staff||(z=e(i))!=null&&z.is_superuser)?(a(),A(v,{key:0,to:"/admin",class:"hidden md:flex items-center space-x-1 px-3 py-1.5 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 rounded-lg hover:bg-primary-200 dark:hover:bg-primary-900/50 transition-colors text-sm font-medium",title:"Acceder al Panel de Administración"},{default:l(()=>[r(I,{name:"settings",class:"w-4 h-4"}),s[12]||(s[12]=t("span",null,"Admin",-1))]),_:1,__:[12]})):b("",!0),e(n)?(a(),A(g,{key:1})):b("",!0),r(m),e(n)?(a(),c("div",{key:3,ref_key:"userDropdown",ref:o,class:"relative"},[t("button",{class:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800",onClick:M},[t("div",_e,D((((K=e(i))==null?void 0:K.username)||((W=e(i))==null?void 0:W.name)||"U").charAt(0).toUpperCase()),1),r(I,{name:"chevron-down",class:"w-4 h-4"})]),r(L,{name:"dropdown"},{default:l(()=>{var C,X,st,ot,rt,at,nt,it,lt,dt,ct,ut,mt,pt,ft;return[e($)?(a(),c("div",ye,[t("div",ve,[t("p",xe,D((C=e(i))==null?void 0:C.username),1),t("p",be,D((X=e(i))==null?void 0:X.email),1)]),r(v,{to:"/profile",class:"dropdown-item"},{default:l(()=>[r(I,{name:"user",class:"w-4 h-4"}),s[15]||(s[15]=_(" Mi Perfil ",-1))]),_:1,__:[15]}),(st=e(i))!=null&&st.is_staff||(ot=e(i))!=null&&ot.is_superuser?(a(),c("div",he)):b("",!0),(rt=e(i))!=null&&rt.is_staff||(at=e(i))!=null&&at.is_superuser?(a(),c("div",we,s[16]||(s[16]=[t("p",{class:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Administración ",-1)]))):b("",!0),(nt=e(i))!=null&&nt.is_staff||(it=e(i))!=null&&it.is_superuser?(a(),A(v,{key:2,to:"/admin",class:"dropdown-item"},{default:l(()=>[r(I,{name:"home",class:"w-4 h-4"}),s[17]||(s[17]=_(" Panel Admin ",-1))]),_:1,__:[17]})):b("",!0),(lt=e(i))!=null&&lt.is_staff||(dt=e(i))!=null&&dt.is_superuser?(a(),A(v,{key:3,to:"/admin/posts/create",class:"dropdown-item text-green-700 dark:text-green-300"},{default:l(()=>[r(I,{name:"plus",class:"w-4 h-4"}),s[18]||(s[18]=t("span",{class:"flex items-center space-x-2"},[t("span",null,"Crear Post"),t("span",{class:"text-xs bg-green-100 dark:bg-green-900 px-2 py-0.5 rounded-full"},"Nuevo")],-1))]),_:1,__:[18]})):b("",!0),(ct=e(i))!=null&&ct.is_staff||(ut=e(i))!=null&&ut.is_superuser?(a(),A(v,{key:4,to:"/admin/posts",class:"dropdown-item"},{default:l(()=>[r(I,{name:"document-text",class:"w-4 h-4"}),s[19]||(s[19]=_(" Gestionar Posts ",-1))]),_:1,__:[19]})):b("",!0),(mt=e(i))!=null&&mt.is_staff||(pt=e(i))!=null&&pt.is_superuser?(a(),A(v,{key:5,to:"/admin/comments",class:"dropdown-item"},{default:l(()=>[r(I,{name:"chat-bubble-left-right",class:"w-4 h-4"}),s[20]||(s[20]=_(" Moderar Comentarios ",-1))]),_:1,__:[20]})):b("",!0),(ft=e(i))!=null&&ft.is_superuser?(a(),A(v,{key:6,to:"/admin/users",class:"dropdown-item"},{default:l(()=>[r(I,{name:"users",class:"w-4 h-4"}),s[21]||(s[21]=_(" Gestionar Usuarios ",-1))]),_:1,__:[21]})):b("",!0),t("button",{class:"dropdown-item w-full text-left",onClick:O},[r(I,{name:"logout",class:"w-4 h-4"}),s[22]||(s[22]=_(" Cerrar Sesión ",-1))])])):b("",!0)]}),_:1})],512)):(a(),c("div",ge,[r(v,{to:"/login",class:"btn btn-ghost btn-sm"},{default:l(()=>s[13]||(s[13]=[_(" Iniciar Sesión ",-1)])),_:1,__:[13]}),r(v,{to:"/register",class:"btn btn-primary btn-sm"},{default:l(()=>s[14]||(s[14]=[_(" Registrarse ",-1)])),_:1,__:[14]})])),t("button",{class:"md:hidden p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800",onClick:u},[r(I,{name:e(d)?"x":"menu",class:"w-6 h-6"},null,8,["name"])])])]),r(L,{name:"mobile-menu"},{default:l(()=>[e(d)?(a(),c("div",ke,[t("div",$e,[r(w)]),t("div",Ce,[r(v,{to:"/",class:"mobile-nav-link",onClick:s[1]||(s[1]=C=>d.value=!1)},{default:l(()=>s[23]||(s[23]=[_(" Inicio ",-1)])),_:1,__:[23]}),t("div",Te,[t("button",{class:"mobile-nav-link w-full flex items-center justify-between",onClick:y},[s[24]||(s[24]=t("span",null,"Categorías",-1)),r(I,{name:"chevron-down",class:V(["w-4 h-4",{"rotate-180":e(T)}])},null,8,["class"])]),r(L,{name:"mobile-dropdown"},{default:l(()=>[e(T)?(a(),c("div",Ie,[(a(!0),c(F,null,q(e(p),C=>(a(),A(v,{key:C.id,to:`/posts?category=${C.slug}`,class:"block py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-primary-600",onClick:s[2]||(s[2]=X=>d.value=!1)},{default:l(()=>[_(D(C.name)+" ("+D(C.posts_count)+") ",1)]),_:2},1032,["to"]))),128))])):b("",!0)]),_:1})]),r(v,{to:"/posts",class:"mobile-nav-link",onClick:s[3]||(s[3]=C=>d.value=!1)},{default:l(()=>s[25]||(s[25]=[_(" Posts ",-1)])),_:1,__:[25]}),r(v,{to:"/search",class:"mobile-nav-link",onClick:s[4]||(s[4]=C=>d.value=!1)},{default:l(()=>s[26]||(s[26]=[_(" Buscar ",-1)])),_:1,__:[26]})]),e(n)?b("",!0):(a(),c("div",Ne,[r(v,{to:"/login",class:"btn btn-ghost w-full",onClick:s[5]||(s[5]=C=>d.value=!1)},{default:l(()=>s[27]||(s[27]=[_(" Iniciar Sesión ",-1)])),_:1,__:[27]}),r(v,{to:"/register",class:"btn btn-primary w-full",onClick:s[6]||(s[6]=C=>d.value=!1)},{default:l(()=>s[28]||(s[28]=[_(" Registrarse ",-1)])),_:1,__:[28]})]))])):b("",!0)]),_:1})])])}}}),Se=H(Ae,[["__scopeId","data-v-a20cdeb5"]]),De={class:"bg-gray-900 text-white"},Me={class:"container mx-auto px-4 py-12"},ze={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"},Be={class:"lg:col-span-2"},Ee={class:"flex items-center space-x-2 mb-4"},je={class:"flex space-x-4"},Le={href:"#",class:"w-10 h-10 bg-gray-800 hover:bg-primary-600 rounded-full flex items-center justify-center transition-colors duration-200",title:"Facebook"},Pe={href:"#",class:"w-10 h-10 bg-gray-800 hover:bg-primary-600 rounded-full flex items-center justify-center transition-colors duration-200",title:"Twitter"},Re={href:"#",class:"w-10 h-10 bg-gray-800 hover:bg-primary-600 rounded-full flex items-center justify-center transition-colors duration-200",title:"Instagram"},Ve={href:"#",class:"w-10 h-10 bg-gray-800 hover:bg-primary-600 rounded-full flex items-center justify-center transition-colors duration-200",title:"LinkedIn"},Ue={class:"space-y-2"},Fe={key:0},qe={class:"space-y-2"},He={class:"text-xs bg-gray-800 px-2 py-1 rounded"},Oe={class:"border-t border-gray-800 mt-8 pt-8"},We={class:"max-w-md mx-auto text-center"},Xe=["disabled"],Ye=["disabled"],Ge={key:0},Je={key:1},Ke={class:"border-t border-gray-800 mt-8 pt-8 flex flex-col md:flex-row items-center justify-between"},Qe={class:"text-gray-400 text-sm mb-4 md:mb-0"},Ze={class:"flex items-center space-x-6 text-sm text-gray-400"},ts=P({__name:"AppFooter",setup(B){const i=et(),{$toast:n}=Z(),{user:x}=yt(),f=S(""),d=S(!1),h=R(()=>i.categories),$=R(()=>new Date().getFullYear()),T=async()=>{if(f.value.trim())try{d.value=!0,await It().subscribeNewsletter(f.value),n.success("¡Suscripción exitosa! Revisa tu email."),f.value=""}catch(N){n.error(N.message||"Error al suscribirse. Intenta de nuevo.")}finally{d.value=!1}};return(N,o)=>{var k,M;const p=G,u=tt;return a(),c("footer",De,[t("div",Me,[t("div",ze,[t("div",Be,[t("div",Ee,[r(p,{name:"newspaper",class:"w-8 h-8 text-primary-400"}),o[1]||(o[1]=t("span",{class:"text-2xl font-bold"},"Blog de Noticias",-1))]),o[2]||(o[2]=t("p",{class:"text-gray-300 mb-6 max-w-md"}," Tu fuente confiable de información actualizada y relevante. Conectamos historias que importan con las personas que las necesitan. ",-1)),t("div",je,[t("a",Le,[r(p,{name:"facebook",class:"w-5 h-5"})]),t("a",Pe,[r(p,{name:"twitter",class:"w-5 h-5"})]),t("a",Re,[r(p,{name:"instagram",class:"w-5 h-5"})]),t("a",Ve,[r(p,{name:"linkedin",class:"w-5 h-5"})])])]),t("div",null,[o[9]||(o[9]=t("h3",{class:"text-lg font-semibold mb-4"}," Enlaces Rápidos ",-1)),t("ul",Ue,[t("li",null,[r(u,{to:"/",class:"text-gray-300 hover:text-primary-400 transition-colors duration-200"},{default:l(()=>o[3]||(o[3]=[_(" Inicio ",-1)])),_:1,__:[3]})]),t("li",null,[r(u,{to:"/posts",class:"text-gray-300 hover:text-primary-400 transition-colors duration-200"},{default:l(()=>o[4]||(o[4]=[_(" Todos los Posts ",-1)])),_:1,__:[4]})]),t("li",null,[r(u,{to:"/about",class:"text-gray-300 hover:text-primary-400 transition-colors duration-200"},{default:l(()=>o[5]||(o[5]=[_(" Acerca de ",-1)])),_:1,__:[5]})]),t("li",null,[r(u,{to:"/contact",class:"text-gray-300 hover:text-primary-400 transition-colors duration-200"},{default:l(()=>o[6]||(o[6]=[_(" Contacto ",-1)])),_:1,__:[6]})]),t("li",null,[r(u,{to:"/privacy",class:"text-gray-300 hover:text-primary-400 transition-colors duration-200"},{default:l(()=>o[7]||(o[7]=[_(" Privacidad ",-1)])),_:1,__:[7]})]),(k=e(x))!=null&&k.is_staff||(M=e(x))!=null&&M.is_superuser?(a(),c("li",Fe,[r(u,{to:"/admin",class:"text-gray-300 hover:text-primary-400 transition-colors duration-200 flex items-center space-x-1"},{default:l(()=>[r(p,{name:"settings",class:"w-4 h-4"}),o[8]||(o[8]=t("span",null,"Admin",-1))]),_:1,__:[8]})])):b("",!0)])]),t("div",null,[o[10]||(o[10]=t("h3",{class:"text-lg font-semibold mb-4"}," Categorías ",-1)),t("ul",qe,[(a(!0),c(F,null,q((e(h)||[]).slice(0,6),y=>(a(),c("li",{key:(y==null?void 0:y.id)||(y==null?void 0:y.slug)},[r(u,{to:`/category/${(y==null?void 0:y.slug)||""}`,class:"text-gray-300 hover:text-primary-400 transition-colors duration-200 flex items-center justify-between"},{default:l(()=>[t("span",null,D((y==null?void 0:y.name)||"Sin nombre"),1),t("span",He,D((y==null?void 0:y.posts_count)||0),1)]),_:2},1032,["to"])]))),128))])])]),t("div",Oe,[t("div",We,[o[11]||(o[11]=t("h3",{class:"text-lg font-semibold mb-2"}," Mantente Informado ",-1)),o[12]||(o[12]=t("p",{class:"text-gray-300 mb-4"}," Recibe las últimas noticias directamente en tu bandeja de entrada ",-1)),t("form",{class:"flex space-x-2",onSubmit:_t(T,["prevent"])},[$t(t("input",{"onUpdate:modelValue":o[0]||(o[0]=y=>Tt(f)?f.value=y:null),type:"email",placeholder:"Tu dirección de email",required:"",class:"flex-1 px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-white placeholder-gray-400",disabled:e(d)},null,8,Xe),[[Ct,e(f)]]),t("button",{type:"submit",class:"px-6 py-2 bg-primary-600 hover:bg-primary-700 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",disabled:e(d)},[e(d)?(a(),c("span",Ge,"...")):(a(),c("span",Je,"Suscribirse"))],8,Ye)],32),o[13]||(o[13]=t("p",{class:"text-xs text-gray-400 mt-2"}," No spam, solo contenido de calidad. Puedes cancelar en cualquier momento. ",-1))])]),t("div",Ke,[t("div",Qe," © "+D(e($))+" Blog de Noticias. Todos los derechos reservados. ",1),t("div",Ze,[r(u,{to:"/terms",class:"hover:text-primary-400 transition-colors duration-200"},{default:l(()=>o[14]||(o[14]=[_(" Términos de Uso ",-1)])),_:1,__:[14]}),r(u,{to:"/privacy",class:"hover:text-primary-400 transition-colors duration-200"},{default:l(()=>o[15]||(o[15]=[_(" Política de Privacidad ",-1)])),_:1,__:[15]}),r(u,{to:"/cookies",class:"hover:text-primary-400 transition-colors duration-200"},{default:l(()=>o[16]||(o[16]=[_(" Cookies ",-1)])),_:1,__:[16]})])])])])}}}),es=P({__name:"BackToTop",setup(B){const i=S(!1),n=()=>{typeof window<"u"&&(i.value=window.scrollY>300)},x=()=>{typeof window<"u"&&window.scrollTo({top:0,behavior:"smooth"})};return U(()=>{typeof window<"u"&&window.addEventListener("scroll",n)}),J(()=>{typeof window<"u"&&window.removeEventListener("scroll",n)}),(f,d)=>{const h=G,$=Rt;return a(),A($,null,{default:l(()=>[r(L,{name:"back-to-top"},{default:l(()=>[e(i)?(a(),c("button",{key:0,class:"fixed bottom-8 right-8 z-40 w-12 h-12 bg-primary-600 hover:bg-primary-700 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center group",title:"Volver arriba",onClick:x},[r(h,{name:"arrow-up",class:"w-5 h-5 transform group-hover:-translate-y-1 transition-transform duration-200"})])):b("",!0)]),_:1})]),_:1})}}}),ss=H(es,[["__scopeId","data-v-9b5d14ac"]]),os={class:"p-4"},rs={class:"flex items-start"},as={class:"flex-shrink-0"},ns={class:"ml-3 w-0 flex-1 pt-0.5"},is={class:"text-sm font-medium text-gray-900 dark:text-white"},ls={class:"mt-1 text-sm text-gray-500 dark:text-gray-300"},ds={key:0,class:"mt-3"},cs={key:0,class:"h-1 bg-gray-200 dark:bg-gray-700"},us=P({__name:"ToastNotification",props:{toast:{},showProgress:{type:Boolean,default:!0}},emits:["dismiss"],setup(B,{emit:i}){const n=B,x=i,f=S(!0),d=S(100),h=S(!1),$=S(Date.now()),T=S(n.toast.duration||5e3);let N=null,o=null;const p=R(()=>{const m="border-l-4";switch(n.toast.type){case"success":return`${m} border-green-400`;case"error":return`${m} border-red-400`;case"warning":return`${m} border-yellow-400`;case"info":default:return`${m} border-blue-400`}}),u=R(()=>{switch(n.toast.type){case"success":return"CheckCircleIcon";case"error":return"XCircleIcon";case"warning":return"ExclamationTriangleIcon";case"info":default:return"InformationCircleIcon"}}),k=R(()=>{switch(n.toast.type){case"success":return"text-green-400";case"error":return"text-red-400";case"warning":return"text-yellow-400";case"info":default:return"text-blue-400"}}),M=R(()=>{switch(n.toast.type){case"success":return"bg-green-400";case"error":return"bg-red-400";case"warning":return"bg-yellow-400";case"info":default:return"bg-blue-400"}}),y=()=>{f.value=!1,v()},O=()=>{var m;(m=n.toast.action)!=null&&m.handler&&n.toast.action.handler(),y()},j=()=>{if(n.toast.persistent||!N)return;h.value=!0,v();const m=Date.now()-$.value;T.value=Math.max(0,T.value-m)},s=()=>{n.toast.persistent||h.value===!1||(h.value=!1,$.value=Date.now(),T.value>0?I(T.value):y())},I=m=>{if(!n.toast.persistent&&(N=setTimeout(()=>{y()},m),n.showProgress)){const E=d.value,z=m;o=St(()=>{const W=Date.now()-$.value,C=Math.max(0,z-W);d.value=C/z*E,C<=0&&(clearInterval(o),o=null)},50)}},v=()=>{N&&(clearTimeout(N),N=null),o&&(clearInterval(o),o=null)},w=()=>{!n.toast.persistent&&n.toast.duration&&n.toast.duration>0&&($.value=Date.now(),T.value=n.toast.duration,I(n.toast.duration))},g=()=>{x("dismiss",n.toast.id)};return J(()=>{v()}),Y("CheckCircleIcon"),Y("XCircleIcon"),Y("ExclamationTriangleIcon"),Y("InformationCircleIcon"),(m,E)=>(a(),A(L,{name:"toast",appear:"",onEnter:w,onLeave:g},{default:l(()=>[e(f)?(a(),c("div",{key:0,class:V(["toast-notification max-w-sm w-full bg-white dark:bg-gray-800 shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden",e(p)]),onMouseenter:j,onMouseleave:s},[t("div",os,[t("div",rs,[t("div",as,[(a(),A(Nt(e(u)),{class:V(["h-6 w-6",e(k)]),"aria-hidden":"true"},null,8,["class"]))]),t("div",ns,[t("p",is,D(m.toast.title),1),t("p",ls,D(m.toast.message),1),m.toast.action?(a(),c("div",ds,[t("button",{onClick:O,class:"text-sm font-medium text-primary-600 dark:text-primary-400 hover:text-primary-500 dark:hover:text-primary-300 focus:outline-none focus:underline"},D(m.toast.action.label),1)])):b("",!0)]),t("div",{class:"ml-4 flex-shrink-0 flex"},[t("button",{onClick:y,class:"bg-white dark:bg-gray-800 rounded-md inline-flex text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},E[0]||(E[0]=[t("span",{class:"sr-only"},"Cerrar",-1),t("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])]),m.showProgress&&!m.toast.persistent?(a(),c("div",cs,[t("div",{class:V(["h-full transition-all ease-linear",e(M)]),style:At({width:`${e(d)}%`})},null,6)])):b("",!0)],34)):b("",!0)]),_:1}))}}),ms=H(us,[["__scopeId","data-v-9e5c5f52"]]),ps={class:"fixed inset-0 flex items-end justify-center px-4 py-6 pointer-events-none sm:p-6 sm:items-start sm:justify-end z-50"},fs={class:"w-full flex flex-col items-center space-y-4 sm:items-end"},gs=P({__name:"ToastContainer",setup(B){const i=S([]),n=p=>{const u={...p,id:d()};i.value.push(u),i.value.length>5&&i.value.shift()},x=p=>{const u=i.value.findIndex(k=>k.id===p);u>-1&&i.value.splice(u,1)},f=()=>{i.value=[]},d=()=>`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,h=(p,u)=>{n({type:"success",title:u||"Éxito",message:p,duration:5e3})},$=(p,u)=>{n({type:"error",title:u||"Error",message:p,duration:7e3})},T=(p,u)=>{n({type:"warning",title:u||"Advertencia",message:p,duration:6e3})},N=(p,u)=>{n({type:"info",title:u||"Información",message:p,duration:5e3})},o=Z();return o.$toast||o.provide("toast",{show:n,success:h,error:$,warning:T,info:N,remove:x,clear:f}),U(()=>{var p,u,k;(p=o.$bus)==null||p.on("show-toast",n),(u=o.$bus)==null||u.on("remove-toast",x),(k=o.$bus)==null||k.on("clear-toasts",f)}),J(()=>{var p,u,k;(p=o.$bus)==null||p.off("show-toast",n),(u=o.$bus)==null||u.off("remove-toast",x),(k=o.$bus)==null||k.off("clear-toasts",f)}),(p,u)=>{const k=ms;return a(),A(Dt,{to:"body"},[t("div",ps,[t("div",fs,[(a(!0),c(F,null,q(e(i),M=>(a(),A(k,{key:M.id,toast:M,onDismiss:x},null,8,["toast"]))),128))])])])}}}),_s=H(gs,[["__scopeId","data-v-33f59bd9"]]),ys={class:"min-h-screen flex flex-col bg-gray-50 dark:bg-gray-900"},vs={class:"flex-1 pt-16"},As=P({__name:"default",setup(B){const i=et(),n=Mt(),x=zt(),{initializeNotifications:f}=Pt();return U(async()=>{try{if(x.initializeTheme(),x.initializeWindowSize(),x.initializeScroll(),await n.initializeAuth(),n.isAuthenticated.value)try{await f()}catch(d){console.warn("⚠️ Notification initialization failed:",d)}try{await Promise.all([i.fetchCategories(),i.fetchFeaturedPosts()])}catch(d){console.error("❌ Error cargando datos iniciales:",d)}}catch(d){console.error("❌ Error in layout initialization:",d)}}),(d,h)=>{const $=Se,T=ts,N=ss,o=_s;return a(),c("div",ys,[r($),t("main",vs,[Bt(d.$slots,"default")]),r(T),r(N),r(o)])}}});export{As as default};
