import{d as C,c as n,f as e,t as N,L as v,o as r,T as U,C as j,r as w,x as S,J as z,h as s,F as k,k as M,m as T,a as d,z as V,n as c,v as h,H as B,g as R,i as A}from"./BE3ND16f.js";import{u as H}from"./DTjiTvom.js";const P=["disabled"],D={class:"sr-only"},E=C({__name:"ToggleSwitch",props:{modelValue:{type:Boolean},disabled:{type:Boolean,default:!1},label:{default:"Toggle"}},emits:["update:modelValue"],setup(x,{emit:f}){const m=x,g=f,p=()=>{m.disabled||g("update:modelValue",!m.modelValue)};return(u,b)=>(r(),n("button",{type:"button",class:v(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",u.modelValue?"bg-primary-600":"bg-gray-200 dark:bg-gray-700",u.disabled?"opacity-50 cursor-not-allowed":""]),disabled:u.disabled,onClick:p},[e("span",D,N(u.label),1),e("span",{class:v(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",u.modelValue?"translate-x-5":"translate-x-0"])},null,2)],10,P))}}),F={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},G={key:0,class:"animate-pulse space-y-6"},$={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},L={class:"space-y-4"},I={class:"flex items-center justify-between"},J={class:"flex items-center justify-between"},K={class:"flex items-center justify-between"},O={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},Q={class:"space-y-4"},W={class:"flex items-center justify-between"},X={class:"flex items-center justify-between"},Y={class:"flex items-center justify-between"},Z={class:"flex items-center justify-between"},ee={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},te={class:"space-y-4"},se={class:"flex items-center justify-between"},ae={class:"flex items-center justify-between"},oe={class:"flex items-center justify-between"},ie={class:"flex items-center justify-between"},le={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},de={class:"space-y-4"},ne={class:"flex items-center justify-between"},re={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ue=["disabled"],me=["disabled"],ye={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},fe=["disabled"],ge={class:"flex justify-end"},pe=["disabled"],be={key:0,class:"flex items-center"},ce={key:1},xe=C({__name:"settings",setup(x){const{user:f}=U(),{preferences:m,loading:g,fetchPreferences:p,updatePreferences:u}=H(),{showToast:b}=j(),i=w(!1),a=w({email_notifications:!0,push_notifications:!0,in_app_notifications:!0,notify_comments:!0,notify_comment_replies:!0,notify_post_likes:!0,notify_user_follows:!0,notify_post_featured:!0,notify_content_moderation:!0,notify_system_announcements:!0,notify_user_registrations:!1,notify_moderation_required:!1,notify_post_published:!1,quiet_hours_enabled:!1,quiet_hours_start:"22:00",quiet_hours_end:"08:00",digest_frequency:"weekly"}),q=async()=>{try{i.value=!0,await u(a.value),b({title:"Configuración guardada",message:"Tus preferencias de notificación han sido actualizadas",type:"success"})}catch{b({title:"Error",message:"No se pudo guardar la configuración",type:"error"})}finally{i.value=!1}};return S(async()=>{await p(),m.value&&(a.value={...m.value})}),z(m,y=>{y&&(a.value={...y})},{deep:!0}),(y,t)=>{var _;const l=E;return r(),n("div",F,[t[39]||(t[39]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"}," Configuración de Notificaciones "),e("p",{class:"mt-2 text-gray-600 dark:text-gray-400"}," Personaliza cómo y cuándo recibes notificaciones ")],-1)),s(g)?(r(),n("div",G,[(r(),n(k,null,M(4,o=>e("div",{key:o,class:"bg-white dark:bg-gray-800 rounded-lg p-6"},t[15]||(t[15]=[e("div",{class:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-4"},null,-1),e("div",{class:"space-y-3"},[e("div",{class:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e("div",{class:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})],-1)]))),64))])):(r(),n("form",{key:1,onSubmit:T(q,["prevent"]),class:"space-y-6"},[e("div",$,[t[19]||(t[19]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," Configuración General ",-1)),e("div",L,[e("div",I,[t[16]||(t[16]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-900 dark:text-white"}," Notificaciones en la aplicación "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Recibe notificaciones dentro de la aplicación ")],-1)),d(l,{modelValue:s(a).in_app_notifications,"onUpdate:modelValue":t[0]||(t[0]=o=>s(a).in_app_notifications=o),disabled:s(i)},null,8,["modelValue","disabled"])]),e("div",J,[t[17]||(t[17]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-900 dark:text-white"}," Notificaciones por email "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Recibe notificaciones en tu correo electrónico ")],-1)),d(l,{modelValue:s(a).email_notifications,"onUpdate:modelValue":t[1]||(t[1]=o=>s(a).email_notifications=o),disabled:s(i)},null,8,["modelValue","disabled"])]),e("div",K,[t[18]||(t[18]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-900 dark:text-white"}," Notificaciones push del navegador "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Recibe notificaciones push en tu navegador ")],-1)),d(l,{modelValue:s(a).push_notifications,"onUpdate:modelValue":t[2]||(t[2]=o=>s(a).push_notifications=o),disabled:s(i)},null,8,["modelValue","disabled"])])])]),e("div",O,[t[24]||(t[24]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," Notificaciones de Contenido ",-1)),e("div",Q,[e("div",W,[t[20]||(t[20]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-900 dark:text-white"}," Nuevos comentarios "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Cuando alguien comenta en tus posts ")],-1)),d(l,{modelValue:s(a).notify_comments,"onUpdate:modelValue":t[3]||(t[3]=o=>s(a).notify_comments=o),disabled:s(i)},null,8,["modelValue","disabled"])]),e("div",X,[t[21]||(t[21]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-900 dark:text-white"}," Respuestas a comentarios "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Cuando alguien responde a tus comentarios ")],-1)),d(l,{modelValue:s(a).notify_comment_replies,"onUpdate:modelValue":t[4]||(t[4]=o=>s(a).notify_comment_replies=o),disabled:s(i)},null,8,["modelValue","disabled"])]),e("div",Y,[t[22]||(t[22]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-900 dark:text-white"}," Posts destacados "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Cuando tus posts son destacados ")],-1)),d(l,{modelValue:s(a).notify_post_featured,"onUpdate:modelValue":t[5]||(t[5]=o=>s(a).notify_post_featured=o),disabled:s(i)},null,8,["modelValue","disabled"])]),e("div",Z,[t[23]||(t[23]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-900 dark:text-white"}," Moderación de contenido "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Cuando tu contenido es aprobado o rechazado ")],-1)),d(l,{modelValue:s(a).notify_content_moderation,"onUpdate:modelValue":t[6]||(t[6]=o=>s(a).notify_content_moderation=o),disabled:s(i)},null,8,["modelValue","disabled"])])])]),e("div",ee,[t[29]||(t[29]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," Notificaciones del Sistema ",-1)),e("div",te,[e("div",se,[t[25]||(t[25]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-900 dark:text-white"}," Anuncios del sistema "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Anuncios importantes y actualizaciones ")],-1)),d(l,{modelValue:s(a).notify_system_announcements,"onUpdate:modelValue":t[7]||(t[7]=o=>s(a).notify_system_announcements=o),disabled:s(i)},null,8,["modelValue","disabled"])]),(_=s(f))!=null&&_.is_staff?(r(),n(k,{key:0},[e("div",ae,[t[26]||(t[26]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-900 dark:text-white"}," Nuevos usuarios "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Cuando se registran nuevos usuarios ")],-1)),d(l,{modelValue:s(a).notify_user_registrations,"onUpdate:modelValue":t[8]||(t[8]=o=>s(a).notify_user_registrations=o),disabled:s(i)},null,8,["modelValue","disabled"])]),e("div",oe,[t[27]||(t[27]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-900 dark:text-white"}," Moderación requerida "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Cuando el contenido requiere moderación ")],-1)),d(l,{modelValue:s(a).notify_moderation_required,"onUpdate:modelValue":t[9]||(t[9]=o=>s(a).notify_moderation_required=o),disabled:s(i)},null,8,["modelValue","disabled"])]),e("div",ie,[t[28]||(t[28]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-900 dark:text-white"}," Posts publicados "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Cuando se publican nuevos posts ")],-1)),d(l,{modelValue:s(a).notify_post_published,"onUpdate:modelValue":t[10]||(t[10]=o=>s(a).notify_post_published=o),disabled:s(i)},null,8,["modelValue","disabled"])])],64)):V("",!0)])]),e("div",le,[t[33]||(t[33]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," Horario de Silencio ",-1)),e("div",de,[e("div",ne,[t[30]||(t[30]=e("div",null,[e("label",{class:"text-sm font-medium text-gray-900 dark:text-white"}," Activar horario de silencio "),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," No recibir notificaciones durante ciertas horas ")],-1)),d(l,{modelValue:s(a).quiet_hours_enabled,"onUpdate:modelValue":t[11]||(t[11]=o=>s(a).quiet_hours_enabled=o),disabled:s(i)},null,8,["modelValue","disabled"])]),s(a).quiet_hours_enabled?(r(),n("div",re,[e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Hora de inicio ",-1)),c(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>s(a).quiet_hours_start=o),type:"time",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white",disabled:s(i)},null,8,ue),[[h,s(a).quiet_hours_start]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Hora de fin ",-1)),c(e("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>s(a).quiet_hours_end=o),type:"time",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white",disabled:s(i)},null,8,me),[[h,s(a).quiet_hours_end]])])])):V("",!0)])]),e("div",ye,[t[37]||(t[37]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," Resumen por Email ",-1)),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Frecuencia del resumen ",-1)),c(e("select",{"onUpdate:modelValue":t[14]||(t[14]=o=>s(a).digest_frequency=o),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:text-white",disabled:s(i)},t[34]||(t[34]=[e("option",{value:"never"},"Nunca",-1),e("option",{value:"daily"},"Diario",-1),e("option",{value:"weekly"},"Semanal",-1),e("option",{value:"monthly"},"Mensual",-1)]),8,fe),[[B,s(a).digest_frequency]]),t[36]||(t[36]=e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Recibe un resumen de tus notificaciones por email ",-1))])]),e("div",ge,[e("button",{type:"submit",disabled:s(i),class:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"},[s(i)?(r(),n("span",be,t[38]||(t[38]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),R(" Guardando... ",-1)]))):(r(),n("span",ce,"Guardar Configuración"))],8,pe)])],32))])}}}),we=A(xe,[["__scopeId","data-v-df5f8ef8"]]);export{we as default};
