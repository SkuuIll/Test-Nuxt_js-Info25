import{_ as I}from"./9ykhWItT.js";import{_ as N}from"./CiJxZ_V9.js";import{d as R,r as _,x as $,Q as V,c,o,f as e,a as p,n as q,z as x,v as T,h as a,a9 as g,p as z,a0 as L,w as f,t as i,F as A,k as E,l as K,_ as M,q as U,D as j,i as P}from"./BE3ND16f.js";import{u as G}from"./CRYnRe3J.js";const H={class:"relative"},J={class:"relative"},O={key:0,class:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 max-h-96 overflow-y-auto z-50"},Q={key:0,class:"p-4"},W={key:1,class:"py-2"},X={class:"px-4 py-2 text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},Y={class:"flex items-start space-x-3"},Z={key:0,class:"flex-shrink-0"},ee={class:"flex-1 min-w-0"},te={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},ae={class:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2"},se={class:"flex items-center space-x-2 mt-2"},re={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-200"},oe={class:"text-xs text-gray-400"},ne={key:0,class:"border-t border-gray-200 dark:border-gray-700 px-4 py-2"},le={key:2,class:"p-4 text-center"},ce={class:"text-sm text-gray-600 dark:text-gray-400"},ie=R({__name:"SearchBar",props:{placeholder:{default:"Buscar artículos..."},autoFocus:{type:Boolean,default:!1}},setup(v){const k=v,s=_(""),n=_([]),d=_(!1),u=_(!1),b=G(async r=>{if(!r.trim()){n.value=[];return}try{d.value=!0;const m=await U().searchPosts(r);n.value=m.results.slice(0,5)}catch(l){console.error("Search error:",l),n.value=[]}finally{d.value=!1}},300),w=()=>{b(s.value)},y=()=>{s.value.trim()&&(j(`/search?q=${encodeURIComponent(s.value)}`),u.value=!1)},B=r=>{u.value=!1,s.value=""},S=()=>{y()},h=()=>{s.value="",n.value=[],u.value=!1},C=r=>new Date(r).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"});return $(()=>{k.autoFocus&&V(()=>{const r=document.querySelector('input[type="text"]');r==null||r.focus()})}),(r,l)=>{const m=I,D=N,F=M;return o(),c("div",H,[e("div",J,[p(m,{name:"search",class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),q(e("input",{"onUpdate:modelValue":l[0]||(l[0]=t=>z(s)?s.value=t:null),type:"text",placeholder:"Buscar artículos...",class:"input pl-10 pr-10",onInput:w,onFocus:l[1]||(l[1]=t=>u.value=!0),onKeydown:[g(h,["escape"]),g(y,["enter"])]},null,544),[[T,a(s)]]),a(s)?(o(),c("button",{key:0,class:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",onClick:h},[p(m,{name:"x",class:"w-4 h-4 text-gray-400"})])):x("",!0)]),p(L,{name:"search-results"},{default:f(()=>[a(u)&&(a(n).length>0||a(d))?(o(),c("div",O,[a(d)?(o(),c("div",Q,l[2]||(l[2]=[e("div",{class:"flex items-center space-x-2"},[e("div",{class:"animate-spin w-4 h-4 border-2 border-primary-600 border-t-transparent rounded-full"}),e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Buscando...")],-1)]))):a(n).length>0?(o(),c("div",W,[e("div",X," Resultados ("+i(a(n).length)+") ",1),(o(!0),c(A,null,E(a(n),t=>(o(),K(F,{key:t.id,to:`/posts/${t.slug}`,class:"block px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",onClick:de=>B(t)},{default:f(()=>[e("div",Y,[t.image?(o(),c("div",Z,[p(D,{src:t.image,alt:t.title,class:"w-12 h-12 object-cover rounded",loading:"lazy"},null,8,["src","alt"])])):x("",!0),e("div",ee,[e("h4",te,i(t.title),1),e("p",ae,i(t.excerpt),1),e("div",se,[e("span",re,i(t.category.name),1),e("span",oe,i(C(t.published_at||t.created_at)),1)])])])]),_:2},1032,["to","onClick"]))),128)),a(n).length>=5?(o(),c("div",ne,[e("button",{class:"w-full text-left text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 font-medium",onClick:S},' Ver todos los resultados para "'+i(a(s))+'" ',1)])):x("",!0)])):a(s)&&!a(d)?(o(),c("div",le,[p(m,{name:"search",class:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e("p",ce,' No se encontraron resultados para "'+i(a(s))+'" ',1)])):x("",!0)])):x("",!0)]),_:1})])}}}),_e=P(ie,[["__scopeId","data-v-3c72ccb0"]]);export{_e as _};
